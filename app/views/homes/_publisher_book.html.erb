<% if @books.present? %>
  <% if request.domain == "mlbooksinternational" %>
    <div class="row-fluid  gray_box">
      <div class="container-fluid">
        <div class="row">
          <div class="col-md-12">
            <div class="col-md-12 border_bottom pb10">
              <h2 class="heading1">Featured Books</h2>  
            </div>
            <div class="clearfix"></div>
            <% @books.each_with_index do |f,index| %>
              <div class="item <%= 'active' if index == 0 %>">
                <div class="col-xs-12 col-sm-6 col-md-3">
                  <ul class="alt_content mediaResults results">
                    <li class="thumbSpaceManager thumbSpaceManager_height hidden-phone">
                      <article class="result media-result ebook">
                        <div class="cover" >
                          <a><%= image_tag(f.logo.url(:original), :style => "height: 206px; width: 148px;") %></a>
                        </div>
                        <div class="details">
                          <h3 class="title"><%=  truncate(f.book_title, length: 14) %>
                          </h3>
                          <h4 class="author"><%= link_to truncate(f.books_contributor.first_name+f.books_contributor.last_name, length: 14), books_description_homes_path(:book_id => f.id), :remote => true %></h4>
                        </div>
                      </article>
                    </li>   
                    <div class="clearfix"> </div>  
                  </ul> 
                </div>
              </div>
            <% end %>
            </div>
            <div class="clearfix"></div>
            <div class="col-md-12 mt20">
              <div class="pull-right">
                <div class="pagination-frontend">
                  <nav aria-label="Page navigation" style="clear:both;"> 
                    <%= will_paginate @books,renderer: BootstrapPagination::Rails %>
                  </nav>  
                </div>
              </div>
              <div class="clearfix"></div>
            </div>
          </div>
        </div>
      </div>     
    </div>
  <% else %>
    <div class="row">
      <div class="col-md-10 col-sm-offset-1">
        <div class="carousel carousel-showmanymoveone slide bx-wrapper" id="carousel123">
          <div class="carousel-inner">
            <% @books.each_with_index do |f,index| %>
              <div class="item <%= 'active' if index == 0 %>">
                <div class="col-xs-12 col-sm-6 col-md-3">
                  <div class="result media-result ebook">
                    <div class="cover">
                      <%= link_to image_tag(f.logo.url(:original)),books_description_homes_path(:book_id => f.id), :remote => true %>
                      <div class="details">
                        <h3 class="title"><%= link_to truncate(f.book_title, length: 4), books_description_homes_path(:book_id => f.id), :remote => true %>
                        </h3>
                        <h4 class="author" title=">Betty Karasek">Betty Karasek</h4>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            <% end %>
          </div>
          <a class="left carousel-control" href="#carousel123" data-slide="prev"><i class="glyphicon glyphicon-chevron-left"></i></a>
          <a class="right carousel-control" href="#carousel123" data-slide="next"><i class="glyphicon glyphicon-chevron-right"></i></a>
        </div>
      </div>

    </div>

        <div class="col-sm-12">
          <%= @publisher.welcome_text.html_safe unless @publisher.welcome_text.blank? %>
        </div>
  <% end %>
<% end %>

<script>
$(document).ready(function(){
 (function(){
  // setup your carousels as you normally would using JS
  // or via data attributes according to the documentation
  // https://getbootstrap.com/javascript/#carousel
  $('#carousel123').carousel({ interval: 2000 });
  $('#carouselABC').carousel({ interval: 3600 });
}());

(function(){
  $('.carousel-showmanymoveone .item').each(function(){
    var itemToClone = $(this);

    for (var i=1;i<4;i++) {
      itemToClone = itemToClone.next();

      // wrap around if at end of item collection
      if (!itemToClone.length) {
        itemToClone = $(this).siblings(':first');
      }

      // grab item, clone, add marker class, add to collection
      itemToClone.children(':first-child').clone()
        .addClass("cloneditem-"+(i))
        .appendTo($(this));
    }
  });
}());
 });
</script>